"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_copilot-auth-token_copilot-auth-token_ts-packages_diff-file-header_diff-file-header_-ebf719"],{65620:(e,t,r)=>{r.d(t,{Y:()=>AuthToken});var i=r(50467);let AuthToken=class AuthToken{get authorizationHeaderValue(){return`GitHub-Bearer ${this.value}`}needsRefreshing(e){return this.isExpired||this.ssoChanged(e)}get isExpired(){let e=new Date(this.expiration);return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()))<new Date(Date.now()+15e3)}ssoChanged(e){return!(this.ssoOrgIDs.every(t=>e.includes(t))&&e.every(e=>this.ssoOrgIDs.includes(e)))}static fromResult(e,t){return new AuthToken(e.token,e.expiration,t)}serialize(){return{value:this.value,expiration:this.expiration,ssoOrgIDs:this.ssoOrgIDs}}static deserialize(e){return new AuthToken(e.value,e.expiration,e.ssoOrgIDs)}constructor(e,t,r){(0,i._)(this,"value",void 0),(0,i._)(this,"expiration",void 0),(0,i._)(this,"ssoOrgIDs",void 0),this.value=e,this.expiration=t,this.ssoOrgIDs=r}}},65411:(e,t,r)=>{r.d(t,{J:()=>CopilotAuthTokenProvider});var i=r(50467),s=r(65620),n=r(82075),l=r(96379);let CopilotAuthTokenProvider=class CopilotAuthTokenProvider{async getAuthToken(){let e=this.getLocalStorageAuthToken();return e?this.validateAuthToken(e):this.fetchAuthToken()}setLocalStorageAuthToken(e){this.copilotLocalStorage.setItem(this.storageKey,JSON.stringify(e.serialize()))}getLocalStorageAuthToken(){let e=this.copilotLocalStorage.getItem(this.storageKey);return e?s.Y.deserialize(JSON.parse(e)):null}removeLocalStorageAuthToken(){this.copilotLocalStorage.removeItem(this.storageKey)}async validateAuthToken(e){return e.needsRefreshing(this.ssoOrgIDs)?this.fetchAuthToken():e}fetchAuthToken(){return this.currentAuthTokenRequest||(this.currentAuthTokenRequest=this._fetchAuthToken()),this.currentAuthTokenRequest}async _fetchAuthToken(){let e=await (0,l.lS)(this.tokenEndpoint,{method:"POST"});if(e.ok){let t=await e.json();this.currentAuthTokenRequest=null;let r=s.Y.fromResult(t,this.ssoOrgIDs);return this.setLocalStorageAuthToken(r),r}throw this.currentAuthTokenRequest=null,Error("Failed to mint new auth token")}constructor(e,t="/github-copilot/chat/token",r="COPILOT_AUTH_TOKEN"){(0,i._)(this,"tokenEndpoint",void 0),(0,i._)(this,"storageKey",void 0),(0,i._)(this,"ssoOrgIDs",void 0),(0,i._)(this,"currentAuthTokenRequest",void 0),(0,i._)(this,"copilotLocalStorage",void 0),this.ssoOrgIDs=e,this.currentAuthTokenRequest=null,this.copilotLocalStorage=(0,n.A)("localStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}),this.storageKey=r,this.tokenEndpoint=t}}},79064:(e,t,r)=>{r.d(t,{Jt:()=>d,iI:()=>u});var i=r(50467),s=r(31635),n=r(21728),l=r(45062),a=r(82075),o=r(96540),c=r(99505);let CopilotLocalStorage=class CopilotLocalStorage{get selectedThreadID(){return this.localStorage.getItem(this.COPILOT_SELECTED_THREAD_ID_STORAGE_KEY)}set selectedThreadID(e){let t=this.COPILOT_SELECTED_THREAD_ID_STORAGE_KEY;if(null==e)return void this.localStorage.removeItem(t);this.localStorage.setItem(t,e)}getModel(e){let t=this.localStorage.getItem(this.COPILOT_SELECTED_MODEL_STORAGE_KEY(e));return null===t?t:JSON.parse(t)}setModel(e,t){this.localStorage.setItem(this.COPILOT_SELECTED_MODEL_STORAGE_KEY(e),JSON.stringify(t)),e&&this.localStorage.setItem(this.COPILOT_SELECTED_MODEL_STORAGE_KEY(null),JSON.stringify(t))}get settings(){let e=this.localStorage.getItem(this.COPILOT_SETTINGS_STORAGE_KEY(this.selectedThreadID));return null===e?e:JSON.parse(e)}set settings(e){this.localStorage.setItem(this.COPILOT_SETTINGS_STORAGE_KEY(this.selectedThreadID),JSON.stringify(e))}getPanelHeight(){let e=this.localStorage.getItem(this.COPILOT_PANEL_HEIGHT);return e?parseInt(e):this.DEFAULT_PANEL_HEIGHT}setPanelHeight(e){let t=this.COPILOT_PANEL_HEIGHT;this.localStorage.setItem(t,e.toString())}getPanelWidth(){let e=this.localStorage.getItem(this.COPILOT_PANEL_WIDTH);return e?parseInt(e):this.DEFAULT_PANEL_WIDTH}setPanelWidth(e){let t=this.COPILOT_PANEL_WIDTH;this.localStorage.setItem(t,e.toString())}getRepoCustomInstructionsState(){return"false"!==this.localStorage.getItem(this.COPILOT_REPO_CUSTOM_INSTRUCTIONS_STATE_KEY)}setRepoCustomInstructionsState(e){let t=this.COPILOT_REPO_CUSTOM_INSTRUCTIONS_STATE_KEY;this.localStorage.setItem(t,e.toString())}getCollapsedState(){return"false"!==this.sessionStorage.getItem(this.COPILOT_COLLAPSED_STATE_KEY)}setCollapsedState(e){let t=this.COPILOT_COLLAPSED_STATE_KEY;this.sessionStorage.setItem(t,e.toString())}getSelectedTopic(e){return this.localStorage.getItem(this.COPILOT_SELECTED_TOPIC_STORAGE_KEY(e))}setSelectedTopic(e,t){if(null==t)return void this.localStorage.removeItem(this.COPILOT_SELECTED_TOPIC_STORAGE_KEY(e));let r=this.COPILOT_SELECTED_TOPIC_STORAGE_KEY(e);this.localStorage.setItem(r,t)}getSavedMessage(e){return this.localStorage.getItem(this.COPILOT_SAVED_USER_MESSAGE_KEY(e))}setSavedMessage(e,t){this.setSavedMessageFast(e,t)}setSavedMessageFast(e,t){let r=this.COPILOT_SAVED_USER_MESSAGE_KEY(e);if(null==t)return void this.localStorage.removeItem(r);this.localStorage.setItem(r,t)}clearSavedUserMessage(e){this.localStorage.removeItem(this.COPILOT_SAVED_USER_MESSAGE_KEY(e))}getSavedUserMessageOnError(e){return this.localStorage.getItem(this.COPILOT_SAVED_USER_MESSAGE_ON_ERROR_KEY(e))}setSavedUserMessageOnError(e,t){let r=this.COPILOT_SAVED_USER_MESSAGE_ON_ERROR_KEY(e);if(null==t)return void this.localStorage.removeItem(r);this.localStorage.setItem(r,t)}clearSavedUserMessageOnError(e){this.localStorage.removeItem(this.COPILOT_SAVED_USER_MESSAGE_ON_ERROR_KEY(e))}getEntrypointMessage(){let e,t=this.localStorage.getItem(this.COPILOT_ENTRYPOINT_MESSAGE_KEY);if(null==t)return null;try{e=t.startsWith("{")?JSON.parse(t):void 0}catch{}return e&&void 0!==e.message?{message:e.message,references:e.references}:{message:t,references:void 0}}setEntrypointMessage(e,t){if(null==e)return void this.localStorage.removeItem(this.COPILOT_ENTRYPOINT_MESSAGE_KEY);this.localStorage.setItem(this.COPILOT_ENTRYPOINT_MESSAGE_KEY,JSON.stringify({message:e,references:t}))}getCurrentReferences(e){let t=this.COPILOT_CURRENT_REFERENCES_KEY(e),r=this.localStorage.getItem(t);return r?JSON.parse(r):null}setCurrentReferences(e,t){let r=this.COPILOT_CURRENT_REFERENCES_KEY(e),i=t.filter((e,r)=>r===t.findIndex(t=>(0,c.Vb)(e)===(0,c.Vb)(t)));this.localStorage.setItem(r,JSON.stringify(i))}clearCurrentReferences(e){let t=this.COPILOT_CURRENT_REFERENCES_KEY(e);this.localStorage.removeItem(t)}migrateNullThreadToNewThread(e){let t=this.getSavedMessage(null);this.setSavedMessageFast(null,null),t&&this.setSavedMessageFast(e,t);let r=this.getCurrentReferences(null);this.clearCurrentReferences(null),r&&this.setCurrentReferences(e,r)}getImmersiveSidebarCollapsedState(){let e=localStorage.getItem(this.COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY);return null===e||"true"===e}setImmersiveSidebarCollapsedState(e){localStorage.setItem(this.COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY,String(e))}getCopilotDiffReferences(){let e=this.localStorage.getItem(this.COPILOT_DIFF_REFERENCES_KEY);return e?JSON.parse(e):null}setCopilotDiffReferences(e){let t=Array.isArray(e)?e:[e];this.localStorage.setItem(this.COPILOT_DIFF_REFERENCES_KEY,JSON.stringify(t))}removeCopilotDiffReferences(){this.localStorage.removeItem(this.COPILOT_DIFF_REFERENCES_KEY)}getMeterBannerFlag(){let e=this.localStorage.getItem(this.COPILOT_METER_BANNER_FLAG);return null===e?null:"true"===e}setMeterBannerFlag(e){this.localStorage.setItem(this.COPILOT_METER_BANNER_FLAG,String(e))}removeMeterBannerFlag(){this.localStorage.removeItem(this.COPILOT_METER_BANNER_FLAG)}getQuotaExceededBannerFlag(){let e=this.tempStorage.getItem(this.COPILOT_QUOTA_EXCEEDED_BANNER_FLAG);return null===e?null:"true"===e}setQuotaExceededBannerFlag(e){this.tempStorage.setItem(this.COPILOT_QUOTA_EXCEEDED_BANNER_FLAG,String(e))}removeQuotaExceededBannerFlag(){this.tempStorage.removeItem(this.COPILOT_QUOTA_EXCEEDED_BANNER_FLAG)}getTrialSuccessBannerFlag(){return this.getBooleanFlag(this.COPILOT_TRIAL_SUCCESS_BANNER_FLAG)}setTrialSuccessBannerFlag(e){this.tempStorage.setItem(this.COPILOT_TRIAL_SUCCESS_BANNER_FLAG,String(e))}removeTrialSuccessBannerFlag(){this.tempStorage.removeItem(this.COPILOT_TRIAL_SUCCESS_BANNER_FLAG)}getProPlusSuccessBannerFlag(){return this.getBooleanFlag(this.COPILOT_PRO_PLUS_SUCCESS_BANNER_FLAG)}setProPlusSuccessBannerFlag(e){this.tempStorage.setItem(this.COPILOT_PRO_PLUS_SUCCESS_BANNER_FLAG,String(e))}removeProPlusSuccessBannerFlag(){this.tempStorage.removeItem(this.COPILOT_PRO_PLUS_SUCCESS_BANNER_FLAG)}getProPlusAnimationFlag(){return this.getBooleanFlag(this.COPILOT_PRO_PLUS_ANIMATION_FLAG)}setProPlusAnimationFlag(e){this.tempStorage.setItem(this.COPILOT_PRO_PLUS_ANIMATION_FLAG,String(e))}removeProPlusAnimationFlag(){this.tempStorage.removeItem(this.COPILOT_PRO_PLUS_ANIMATION_FLAG)}getTracingRequestedFlag(){return"true"===this.sessionStorage.getItem(this.COPILOT_TRACING_REQUESTED_FLAG)}setTracingRequestedFlag(e){this.sessionStorage.setItem(this.COPILOT_TRACING_REQUESTED_FLAG,String(e))}getWrapCodeLines(){return"true"===localStorage.getItem(this.COPILOT_WRAP_CODE_LINES_KEY)}setWrapCodeLines(e){this.localStorage.setItem(this.COPILOT_WRAP_CODE_LINES_KEY,String(e))}getBooleanFlag(e,t=this.tempStorage){let r=t.getItem(e);return null===r?null:"true"===r}retrieveAndValidateRequestIDs(){let e=this.localStorage.getItem(this.COPILOT_MESSAGE_REQUEST_ID_KEY);try{let t=JSON.parse(e||"[]");if(!Array.isArray(t)||0===t.length)return[];return t.filter(e=>"string"==typeof e.messageID&&"string"==typeof e.requestID)}catch{return[]}}addRequestID(e,t){let r=this.retrieveAndValidateRequestIDs(),i=r.findIndex(t=>t.messageID===e);-1!==i&&r.splice(i,1),r.push({messageID:e,requestID:t}),r.length>this.MAX_MESSAGE_REQUEST_ID_STORAGE_COUNT&&r.shift(),this.localStorage.setItem(this.COPILOT_MESSAGE_REQUEST_ID_KEY,JSON.stringify(r))}getRequestID(e){let t=this.retrieveAndValidateRequestIDs().find(t=>t.messageID===e);return t?t.requestID:void 0}constructor(){(0,i._)(this,"COPILOT_REPO_CUSTOM_INSTRUCTIONS_STATE_KEY","COPILOT_REPO_CUSTOM_INSTRUCTIONS_STATE_KEY"),(0,i._)(this,"COPILOT_SELECTED_THREAD_ID_STORAGE_KEY","COPILOT_SELECTED_THREAD_ID_STORAGE_KEY"),(0,i._)(this,"COPILOT_COLLAPSED_STATE_KEY","COPILOT_COLLAPSED_STATE_KEY"),(0,i._)(this,"COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY","COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY"),(0,i._)(this,"COPILOT_PANEL_HEIGHT","COPILOT_PANEL_HEIGHT"),(0,i._)(this,"DEFAULT_PANEL_HEIGHT",600),(0,i._)(this,"COPILOT_PANEL_WIDTH","COPILOT_PANEL_WIDTH"),(0,i._)(this,"COPILOT_ENTRYPOINT_MESSAGE_KEY","COPILOT_ENTRYPOINT_MESSAGE_KEY"),(0,i._)(this,"COPILOT_MESSAGE_REQUEST_ID_KEY","COPILOT_MESSAGE_REQUEST_ID_KEY"),(0,i._)(this,"COPILOT_METER_BANNER_FLAG","COPILOT_METER_BANNER_FLAG"),(0,i._)(this,"COPILOT_QUOTA_EXCEEDED_BANNER_FLAG","COPILOT_QUOTA_EXCEEDED_BANNER_FLAG"),(0,i._)(this,"COPILOT_TRIAL_SUCCESS_BANNER_FLAG","COPILOT_TRIAL_SUCCESS_BANNER_FLAG"),(0,i._)(this,"COPILOT_PRO_PLUS_SUCCESS_BANNER_FLAG","COPILOT_PRO_PLUS_SUCCESS_BANNER_FLAG"),(0,i._)(this,"COPILOT_PRO_PLUS_ANIMATION_FLAG","COPILOT_PRO_PLUS_ANIMATION_FLAG"),(0,i._)(this,"COPILOT_WRAP_CODE_LINES_KEY","COPILOT_WRAP_CODE_LINES_KEY"),(0,i._)(this,"COPILOT_TRACING_REQUESTED_FLAG","COPILOT_TRACING_REQUESTED_FLAG"),(0,i._)(this,"COPILOT_DIFF_REFERENCES_KEY","COPILOT_DIFF_REFERENCES_KEY"),(0,i._)(this,"MAX_MESSAGE_REQUEST_ID_STORAGE_COUNT",100),(0,i._)(this,"DEFAULT_PANEL_WIDTH",480),(0,i._)(this,"COPILOT_SELECTED_MODEL_STORAGE_KEY",e=>`COPILOT_SELECTED_MODEL_${e}`),(0,i._)(this,"COPILOT_SETTINGS_STORAGE_KEY",e=>`COPILOT_SETTINGS_${e}`),(0,i._)(this,"COPILOT_SAVED_USER_MESSAGE_KEY",e=>`COPILOT_SAVED_USER_MESSAGE_${e}`),(0,i._)(this,"COPILOT_SAVED_USER_MESSAGE_ON_ERROR_KEY",e=>`COPILOT_SAVED_USER_MESSAGE_ON_ERROR_${e}`),(0,i._)(this,"COPILOT_CURRENT_REFERENCES_KEY",e=>`COPILOT_CURRENT_REFERENCES_${e}`),(0,i._)(this,"COPILOT_SELECTED_TOPIC_STORAGE_KEY",e=>`COPILOT_SELECTED_TOPIC_${e}`),(0,i._)(this,"localStorage",(0,a.A)("localStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5})),(0,i._)(this,"longStorage",(0,a.A)("localStorage",{throwQuotaErrorsOnSet:!1})),(0,i._)(this,"tempStorage",(0,a.A)("localStorage",{throwQuotaErrorsOnSet:!1,ttl:18e5})),(0,i._)(this,"sessionStorage",(0,a.A)("sessionStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}))}};(0,s.Cg)([(0,l.s)(100)],CopilotLocalStorage.prototype,"setSavedMessage",null);let d=new CopilotLocalStorage;function u(e,t){let r,i,s,l=(0,n.c)(7);l[0]!==e?(r=()=>d[e](),l[0]=e,l[1]=r):r=l[1];let[a,c]=(0,o.useState)(r);l[2]!==t?(i=e=>{d[t](e),c(e)},l[2]=t,l[3]=i):i=l[3];let u=i;return l[4]!==a||l[5]!==u?(s=[a,u],l[4]=a,l[5]=u,l[6]=s):s=l[6],s}},2087:(e,t,r)=>{r.d(t,{B:()=>m,C:()=>f});var i=r(74848),s=r(21728),n=r(34164),l=r(38621),a=r(81246),o=r(53037),c=r(3614),d=r(59523),u=r(36380),h=r(98755);let _={"diff-file-header":"DiffFileHeader-module__diff-file-header--Z8VIs",collapsed:"DiffFileHeader-module__collapsed--bTqtX","file-name":"DiffFileHeader-module__file-name--ryaCb"};function E(e){let t,r,n=(0,s.c)(13),{newPath:a,oldPath:o,status:c}=e;n[0]!==a?(t=(0,i.jsxs)(i.Fragment,{children:["\u200E",a]}),n[0]=a,n[1]=t):t=n[1];let d=t;n[2]!==o?(r=(0,i.jsxs)(i.Fragment,{children:["\u200E",o]}),n[2]=o,n[3]=r):r=n[3];let u=r;if("RENAMED"===c){let e,t,r;return n[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(l.ArrowRightIcon,{}),t=(0,i.jsx)("span",{className:"sr-only",children:"renamed to"}),n[4]=e,n[5]=t):(e=n[4],t=n[5]),n[6]!==d||n[7]!==u?(r=(0,i.jsxs)("code",{children:[u," ",e,t," ",d]}),n[6]=d,n[7]=u,n[8]=r):r=n[8],r}if("DELETED"===c||"REMOVED"===c){let e;return n[9]!==u?(e=(0,i.jsx)("code",{children:u}),n[9]=u,n[10]=e):e=n[10],e}{let e;return n[11]!==d?(e=(0,i.jsx)("code",{children:d}),n[11]=d,n[12]=e):e=n[12],e}}function m(e){let t,r,m,f,g,S,O,I,p,T,C,R,A,N,L,x,v,y=(0,s.c)(66),{additionalLeftSideContent:P,areLinesExpanded:b,canExpandOrCollapseLines:D,className:F,diffStatsProps:j,isBinary:w,isSubmodule:U,isCollapsed:M,canToggleRichDiff:k,headingId:G,linesAdded:Y,linesChanged:B,linesDeleted:K,fileLinkHref:V,fileLinkRef:$,newMode:H,newPath:W,oldMode:J,oldPath:z,onCopyPath:Q,onHeaderClick:q,onToggleDiffDisplay:X,onToggleExpandAllLines:Z,onToggleFileCollapsed:ee,patchStatus:et,path:er,rightSideContent:ei,size:es,showRichDiff:en,isInSingleFileMode:el}=e,ea=es&&"-"===es[0],eo=M?_.collapsed:"";y[0]!==F||y[1]!==eo?(t=(0,n.$)(_["diff-file-header"],eo,"flex-wrap flex-sm-nowrap",F),y[0]=F,y[1]=eo,y[2]=t):t=y[2],y[3]!==M||y[4]!==el||y[5]!==ee||y[6]!==er?(r=!el&&(0,i.jsx)("div",{className:"d-flex flex-shrink-0 flex-order-1",style:{width:"28px",justifyContent:"center"},children:(0,i.jsx)("button",{onClick:ee,className:"Button Button--iconOnly Button--invisible","aria-label":M?`Expand file: ${er}`:`Collapse file: ${er}`,children:M?(0,i.jsx)(l.ChevronRightIcon,{}):(0,i.jsx)(l.ChevronDownIcon,{})})}),y[3]=M,y[4]=el,y[5]=ee,y[6]=er,y[7]=r):r=y[7],y[8]===Symbol.for("react.memo_cache_sentinel")?(m=(0,n.$)(_["file-name"]),y[8]=m):m=y[8],y[9]!==W||y[10]!==z||y[11]!==et?(f=(0,i.jsx)(E,{newPath:W,oldPath:z,status:et}),y[9]=W,y[10]=z,y[11]=et,y[12]=f):f=y[12],y[13]!==V||y[14]!==$||y[15]!==q||y[16]!==f?(g=(0,i.jsx)(a.A,{className:"Link--primary",href:V,onClick:q,ref:$,children:f}),y[13]=V,y[14]=$,y[15]=q,y[16]=f,y[17]=g):g=y[17],y[18]!==G||y[19]!==g?(S=(0,i.jsx)("h3",{id:G,className:m,children:g}),y[18]=G,y[19]=g,y[20]=S):S=y[20];let ec=W??z??"";return y[21]===Symbol.for("react.memo_cache_sentinel")?(O={direction:"s"},y[21]=O):O=y[21],y[22]!==Q||y[23]!==ec?(I=(0,i.jsx)(h.T,{className:"ml-1 flex-shrink-0",textToCopy:ec,ariaLabel:"Copy file name to clipboard",tooltipProps:O,onCopy:Q}),y[22]=Q,y[23]=ec,y[24]=I):I=y[24],y[25]!==H||y[26]!==J||y[27]!==et?(p=(0,d.AL)(et,J,H)&&(0,i.jsxs)("div",{className:"p-2",children:[(0,i.jsx)("code",{children:J}),(0,i.jsx)(l.ArrowRightIcon,{className:"mx-1"}),(0,i.jsx)("code",{children:H})]}),y[25]=H,y[26]=J,y[27]=et,y[28]=p):p=y[28],y[29]!==b||y[30]!==D||y[31]!==Z||y[32]!==er?(T=D&&Z&&(0,i.jsx)(c.m,{text:b?`Collapse non-diff lines: ${er}`:`Expand all lines: ${er}`,direction:"s",children:(0,i.jsx)("button",{onClick:Z,className:`Button Button--iconOnly Button--invisible flex-shrink-0 ${b?"":"js-expand-all-difflines-button"}`,"aria-label":b?`Collapse non-diff lines: ${er}`:`Expand all lines: ${er}`,"data-file-path":er,children:b?(0,i.jsx)(l.FoldIcon,{}):(0,i.jsx)(l.UnfoldIcon,{})})}),y[29]=b,y[30]=D,y[31]=Z,y[32]=er,y[33]=T):T=y[33],y[34]!==I||y[35]!==p||y[36]!==T||y[37]!==S?(C=(0,i.jsxs)("div",{className:"d-flex px-1 flex-items-center overflow-hidden flex-order-2 flex-sm-order-1",children:[S,I,p,T]}),y[34]=I,y[35]=p,y[36]=T,y[37]=S,y[38]=C):C=y[38],y[39]!==j||y[40]!==U||y[41]!==Y||y[42]!==B||y[43]!==K?(R=!U&&(0,i.jsx)(u.z,{linesAdded:Y,linesDeleted:K,linesChanged:B,...j}),y[39]=j,y[40]=U,y[41]=Y,y[42]=B,y[43]=K,y[44]=R):R=y[44],y[45]!==R?(A=(0,i.jsx)("div",{className:"d-flex mr-2 flex-justify-end flex-items-center flex-1",children:R}),y[45]=R,y[46]=A):A=y[46],y[47]!==w||y[48]!==ea||y[49]!==es?(N=w&&(0,i.jsx)("div",{className:"d-flex flex-items-center",children:(0,i.jsx)("code",{className:(0,n.$)("px-2",ea&&"fgColor-danger",!ea&&"fgColor-success"),children:`${es}`})}),y[47]=w,y[48]=ea,y[49]=es,y[50]=N):N=y[50],y[51]!==k||y[52]!==X||y[53]!==en?(L=k&&(0,i.jsxs)(o.I,{"aria-label":"File view",size:"small",className:"mx-2",onChange:X?e=>X(1===e):void 0,children:[(0,i.jsx)(o.I.IconButton,{"aria-label":"Display the source diff",selected:!en,icon:l.CodeIcon}),(0,i.jsx)(o.I.IconButton,{"aria-label":"Display the rich diff",selected:en,icon:l.FileIcon})]}),y[51]=k,y[52]=X,y[53]=en,y[54]=L):L=y[54],y[55]!==ei||y[56]!==A||y[57]!==N||y[58]!==L?(x=(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-end flex-1 flex-order-1 flex-sm-order-2 flex-items-center",children:[A,N,L,ei]}),y[55]=ei,y[56]=A,y[57]=N,y[58]=L,y[59]=x):x=y[59],y[60]!==P||y[61]!==C||y[62]!==x||y[63]!==t||y[64]!==r?(v=(0,i.jsxs)("div",{className:t,children:[r,P,C,x]}),y[60]=P,y[61]=C,y[62]=x,y[63]=t,y[64]=r,y[65]=v):v=y[65],v}try{E.displayName||(E.displayName="FileName")}catch{}try{m.displayName||(m.displayName="DiffFileHeader")}catch{}function f(e){let t,r,l=(0,s.c)(6),{children:a,isAddition:o,className:c}=e,d=o?"fgColor-success":"fgColor-danger";return l[0]!==c||l[1]!==d?(t=(0,n.$)("ml-1 text-small text-bold",d,c),l[0]=c,l[1]=d,l[2]=t):t=l[2],l[3]!==a||l[4]!==t?(r=(0,i.jsx)("div",{className:t,children:a}),l[3]=a,l[4]=t,l[5]=r):r=l[5],r}try{f.displayName||(f.displayName="LinesChangedCounterLabel")}catch{}},59523:(e,t,r)=>{function i(e){return void 0!==e.linesChanged&&0!==e.linesChanged}function s(e,t,r){return"MODIFIED"===e&&t!==r}function n(e,t,r,s){return"MODIFIED"===t&&r!==s&&!i(e)}function l(e){return"COPIED"===e.status&&!i(e)}function a(e){return"RENAMED"===e.status&&!i(e)}function o(e){return!!e.oldTreeEntry&&null===e.newTreeEntry}function c(e){return!!e.truncatedReason}r.d(t,{AL:()=>s,HI:()=>c,Jc:()=>l,Sn:()=>n,dK:()=>a,lO:()=>o,l_:()=>h,s8:()=>E,xW:()=>_});let d=["maximum diff size exceeded.","maximum number of lines exceeded."],u=/^maximum file count exceeded/;function h(e){let t=e;return d.includes(e)?t="This diff could not be loaded automatically because of too many other changes.":u.test(e)&&(t="This diff could not be loaded automatically because of too many other files to display."),t}function _(e){return!!e.newTreeEntry?.isGenerated}function E(e){return 0===e.linesChanged}},35311:(e,t,r)=>{r.d(t,{QC:()=>h,s2:()=>_,wH:()=>a,xY:()=>u});var i=r(35750),s=r(18150),n=r(50467),l=r(56051);function a(e,t){return e.startsWith(t)&&e!==t?-1:t.startsWith(e)&&e!==t?1:e<t?-1:+(e>t)}function o(e,t){return a(e.name,t.name)}function c(e,t){return a(e.fileName,t.fileName)}let FileNode=class FileNode{constructor(e,t){(0,n._)(this,"diff",void 0),(0,n._)(this,"filePath",void 0),(0,n._)(this,"fileName",void 0),(0,n._)(this,"directoryParts",void 0),(0,n._)(this,"sortOrder",void 0),this.diff=e,this.filePath=e.path;let r=this.filePath.split("/");this.fileName=r[r.length-1],this.directoryParts=r.slice(0,r.length-1),this.sortOrder=t}};var d=new WeakMap;let DirectoryNode=class DirectoryNode{getOrCreateDirectory(e,t){let r=(0,i._)(this,d).get(e);if(!r){let s=this.path?`${this.path}/`:"";r=new DirectoryNode(e,`${s}${e}`,t),this.directories.push(r),(0,i._)(this,d).set(e,r)}return r}sort(){for(let e of(this.directories.sort(o),this.files.sort(c),this.directories))e.sort()}constructor(e,t,r){(0,n._)(this,"directories",[]),(0,n._)(this,"files",[]),(0,s._)(this,d,{writable:!0,value:new Map}),(0,n._)(this,"name",void 0),(0,n._)(this,"path",void 0),(0,n._)(this,"sortOrder",void 0),this.name=e,this.path=t,this.sortOrder=r}};function u(e){let t=new DirectoryNode("","",Number.MAX_SAFE_INTEGER);for(let r of e.map((e,t)=>new FileNode(e,t))){let e=t;for(let t of r.directoryParts)(e=e.getOrCreateDirectory(t,r.sortOrder)).sortOrder=Math.min(e.sortOrder,r.sortOrder);e.files.push(r)}return function e(t){for(let r of t.directories)e(r);let r=t.directories.map(e=>e.sortOrder),i=t.files.map(e=>e.sortOrder);t.sortOrder=Math.min(t.sortOrder,...r,...i)}(t),t.sort(),t}function h(e){let t;t="string"==typeof e?e:e?.newPath||e?.oldPath;let r=t?.lastIndexOf(".");return t?!r||r<0?l.F7:`.${t.substring(r+1)}`:""}function _(e){let t={};return e.map(e=>{let r=h(e.path);void 0!==t[r]?t[r]+=1:t[r]=1}),t}},79472:(e,t,r)=>{r.d(t,{C0:()=>h,ID:()=>d,Qn:()=>_,aX:()=>o,bJ:()=>u,w$:()=>c});var i=r(21728),s=r(20622),n=r(97286),l=r(96459),a=r(53627);let o={splitPreference:"split",lineSpacing:"relaxed",commentsPreference:r(18799).sI.Visible};function c(){return[s.u.diffViewUserSettings]}function d(e){let t,r,s,l=(0,i.c)(6);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=c(),l[0]=t):t=l[0];let a=t;return l[1]!==e?(r=async()=>e||o,l[1]=e,l[2]=r):r=l[2],l[3]!==e||l[4]!==r?(s={queryKey:a,queryFn:r,initialData:e,staleTime:1/0},l[3]=e,l[4]=r,l[5]=s):s=l[5],(0,n.I)(s)}function u(e,t){let r=new URL(window.location.href,window.location.origin);if(t){let i=encodeURIComponent(t);r.searchParams.set(e,i)}else r.searchParams.delete(e);(0,a.bj)(r.toString())}function h(e){let t,r=(0,i.c)(2),s=e,[n]=(0,l.o)();r[0]!==n?(t=n.get("diff"),r[0]=n,r[1]=t):t=r[1];let a=t;return("split"===a||"unified"===a)&&(s=a),s}function _(e){let t=e,[r]=(0,l.o)(),i=r.get("w");return"1"===i?t=!0:"0"===i&&(t=!1),t}},18799:(e,t,r)=>{r.d(t,{sI:()=>i});let i={Visible:"visible",Collapsed:"collapsed"}},61583:(e,t,r)=>{r.d(t,{EW:()=>n,Gl:()=>E,ZD:()=>d,e3:()=>m,i8:()=>u,j$:()=>h,jU:()=>c,o9:()=>_,pd:()=>a,yI:()=>o});var i=r(53627),s=r(71315);function n(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let r=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=r&&6===r.length?r:null}function l(e,t){return`${"left"===t?"L":"R"}${e}`}function a(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function o(e){return!!(n(e)||n(`diff-${e}`))&&(e.includes("R")||e.includes("L"))}function c(e){if(!(a(e)||a(`diff-${e}`)))return;let t=e.replace("#","").replace("diff-","");return t.includes("-")&&(t=t.split("-")[0]??""),t.includes("L")&&(t=t.split("L")[0]??""),t.includes("R")&&(t=t.split("R")[0]??""),t}function d(e){let t=n(e);if(t){let e=t[1],r=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0;if(!e||!r||void 0===i)return;return{diffAnchor:e,startOrientation:r,startLineNumber:i,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??r,endLineNumber:(t[5]?parseInt(t[5]):void 0)??i,firstSelectedLineNumber:i,firstSelectedOrientation:r}}}function u(e){!function(e){let t=`#${e}`;if(t===window.location.hash)return;let r=window.location.href;(0,i.Zu)(t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:r}))}(h(e))}function h(e){let t=l(e.startLineNumber,e.startOrientation),r=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=l(e.endLineNumber,e.endOrientation);r+=`-${t}`}return r}function _(){let e=n(s.fV.hash??"")??"";return(""===e?a(s.fV.hash??"")??"":e?.[0]??"").replace("#","").replace("diff-","")}function E(){let e=(s.fV.hash??"").match(/^#?(r\d+)/),t=e?.[1];return t?parseInt(t.slice(1)):void 0}function m(){let e=(s.fV.hash??"").match(/^#annotation_(\d+)/),t=e?.[1];return t?parseInt(t):void 0}},84363:(e,t,r)=>{r.d(t,{t:()=>s});var i=r(59403);let s=({items:e,filter:t,key:r,secondaryKey:s})=>{let n=e.map(e=>[(0,i.dt)(t,r(e)),e]);return s&&(n=n.map(([e,r])=>[Math.max(e,(0,i.dt)(t,s(r))),r])),n.filter(([e])=>e>i.IP).sort(([e,t],[i,s])=>i===e?r(t).localeCompare(r(s)):i-e).map(([,e])=>e)}},21537:(e,t,r)=>{r.d(t,{A0:()=>l,TA:()=>c,Y:()=>d,_n:()=>u,rE:()=>a,t6:()=>o});let i=/[\u202A-\u202E]|[\u2066-\u2069]|\u{E0001}|\u{E007F}/u,s=/[\u202A-\u202E]|[\u2066-\u2069]|\u{E0001}|\u{E007F}/gu,n=/([\u202A-\u202E]|[\u2066-\u2069]|\u{E0001}|\u{E007F})/gu,l=new Map(Object.entries({"\u202A":"U+202A","\u202B":"U+202B","\u202C":"U+202C","\u202D":"U+202D","\u202E":"U+202E","\u2066":"U+2066","\u2067":"U+2067","\u2068":"U+2068","\u2069":"U+2069","\u{E0001}":"U+E0001","\u{E007F}":"U+E007F"}));function a(e){return`<span class="hidden-unicode-replacement" data-code-text="${e}"></span>`}function o(e){return e.split(n)}function c(e){return d(e)?e.replaceAll(s,e=>l.get(e)??""):e}function d(e){return i.test(e)}function u(e){return l.get(e)}},40104:(e,t,r)=>{r.d(t,{D6:()=>u,Fo:()=>c,MV:()=>h,zB:()=>_});var i=r(50467),s=r(82075),n=r(96540);let l=(0,s.A)("sessionStorage"),a="session-storage-update",o=class UseSessionStorageUpdateEvent extends Event{constructor(e,t){super(a),(0,i._)(this,"storageKey",void 0),(0,i._)(this,"storageValue",void 0),this.storageKey=e,this.storageValue=t}};function c(e,t){let r=(0,n.useRef)(t);(0,n.useEffect)(()=>{r.current=t});let[i,s]=(0,n.useState)(()=>{let t=l.getItem(e);return t?JSON.parse(t):r.current}),c=(0,n.useCallback)(t=>{s(void 0!==t?t:r.current),void 0===t?l.removeItem(e):l.setItem(e,JSON.stringify(t)),document.dispatchEvent(new o(e,t))},[e]),d=(0,n.useCallback)(e=>{r.current=e},[r]);return(0,n.useEffect)(()=>{function t(t){if(t.storageKey===e){let e=t.storageValue;s(void 0!==e?e:r.current)}}document.addEventListener(a,t);let i=l.getItem(e);return i?s(JSON.parse(i)):s(r.current),()=>{document.removeEventListener(a,t)}},[e]),[i,c,d]}function d(e){let t=l.getKeys(),r=[];for(let i in t)t[i]?.startsWith(e)&&r.push(t[i]);return r}function u(e){for(let t of e)l.removeItem(t),document.dispatchEvent(new o(t,void 0))}function h(e){let t=[];for(let r of d(e)){let e=l.getItem(r);null!=e&&t.push(JSON.parse(e))}return t}function _(e){u(d(e))}},11738:(e,t,r)=>{r.d(t,{z:()=>l});var i=r(74848),s=r(96540);let n={CompactCommentInputContainer:"CompactCommentButton-module__CompactCommentInputContainer--mPD5I"},l=(0,s.forwardRef)(({onClick:e,id:t,children:r},s)=>(0,i.jsx)("button",{type:"button",id:t,ref:s,onClick:e,className:n.CompactCommentInputContainer,children:r}));l.displayName="CompactCommentButton"},89141:(e,t,r)=>{r.d(t,{w:()=>h});var i=r(74848),s=r(38621),n=r(5945),l=r(52446),a=r(96540),o=r(50443),c=r(34720),d=r(50307),u=r(35247);let h=({fileDiffReference:e,selectedRange:t,showDivider:r})=>{let h=(0,a.useMemo)(()=>{let r={...e};return t&&(r.selectedRange={start:`${t?.startOrientation[0]?.toUpperCase()??""}${t?.startLineNumber}`,end:`${t?.endOrientation[0]?.toUpperCase()??""}${t?.endLineNumber}`}),r},[e,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.W,{children:[(0,i.jsx)(n.W.Anchor,{children:(0,i.jsxs)(l.l.Item,{children:[(0,i.jsx)(l.l.LeadingVisual,{children:(0,i.jsx)(s.CopilotIcon,{})}),"Copilot"]})}),(0,i.jsx)(n.W.Overlay,{children:(0,i.jsxs)(l.l,{children:[(0,i.jsx)(c.t,{fileDiffReference:h,eventContext:{prx:!0}}),(0,i.jsx)(d.e,{fileDiffReference:h,eventContext:{prx:!0}}),!u.W.copilotRedirectDiffViewToImmersive&&(0,i.jsx)(o.i,{fileDiffReference:h,eventContext:{prx:!0}})]})})]}),r&&(0,i.jsx)(l.l.Divider,{})]})};try{h.displayName||(h.displayName="CopilotDiffChatContextMenu")}catch{}},50443:(e,t,r)=>{r.d(t,{i:()=>o});var i=r(74848),s=r(39619),n=r(53419),l=r(43258),a=r(52446);let o=({fileDiffReference:e,eventContext:t,afterSelect:r})=>{let{addToast:o}=(0,l.Y6)();return(0,i.jsx)(a.l.Item,{onSelect:()=>{(0,s.Oc)(e),o({message:"Reference added to thread",type:"success"}),(0,n.BI)("copilot.file-diff.add",t),r?.()},children:"Attach to current thread"})};try{o.displayName||(o.displayName="DiffLinesAttachMenuItem")}catch{}},34720:(e,t,r)=>{r.d(t,{t:()=>d});var i=r(74848),s=r(39619),n=r(51213),l=r(35247),a=r(79064),o=r(53419),c=r(52446);let d=({fileDiffReference:e,leadingVisual:t,eventContext:r,afterSelect:d})=>(0,i.jsxs)(c.l.Item,{onSelect:()=>{(0,o.BI)("copilot.file-diff.discuss",r),l.W.copilotRedirectDiffViewToImmersive?(a.Jt.setCopilotDiffReferences(e),window.location.href="/copilot"):((0,s.qR)({intent:n.wh.conversation,references:[e]}),d?.())},children:[t&&(0,i.jsx)(c.l.LeadingVisual,{children:t}),"Ask about this diff"]});try{d.displayName||(d.displayName="DiffLinesDiscussMenuItem")}catch{}},50307:(e,t,r)=>{r.d(t,{e:()=>d});var i=r(74848),s=r(39619),n=r(51213),l=r(35247),a=r(79064),o=r(53419),c=r(52446);let d=({fileDiffReference:e,eventContext:t,afterSelect:r})=>(0,i.jsx)(c.l.Item,{onSelect:()=>{(0,o.BI)("copilot.file-diff.explain",t),l.W.copilotRedirectDiffViewToImmersive?(a.Jt.setCopilotDiffReferences(e),a.Jt.setEntrypointMessage("Explain"),window.location.href="/copilot"):((0,s.qR)({content:"Explain",intent:n.wh.explainFileDiff,references:[e]}),r?.())},children:"Explain"});try{d.displayName||(d.displayName="DiffLinesExplainMenuItem")}catch{}},63352:(e,t,r)=>{r.d(t,{Z:()=>C});var i=r(74848),s=r(21728),n=r(75202),l=r(71315),a=r(96540),o=r(38621),c=r(87330),d=r(96665),u=r(19797),h=r(65029),_=r(75298),E=r(55847),m=r(87826);let f=[{label:"Comment is harmful or unsafe",value:"OFFENSIVE_OR_DISCRIMINATORY"},{label:"Comment is poorly formatted",value:"POORLY_FORMATTED"},{label:"Comment is not true",value:"INCORRECT"},{label:"Comment is not helpful",value:"UNHELPFUL"},{label:"Comment is attached to the wrong line(s)",value:"INCORRECT_LINE"},{label:"Code suggestion is harmful or unsafe",value:"SUGGESTION_OFFENSIVE_OR_DISCRIMINATORY"},{label:"Code suggestion is poorly formatted",value:"SUGGESTION_POORLY_FORMATTED"},{label:"Code suggestion does not solve the problem in the comment",value:"SUGGESTION_UNHELPFUL"},{label:"Code suggestion is invalid",value:"SUGGESTION_INVALID"}],g=e=>{let t,r,n,l,o=(0,s.c)(16),{commentId:c,onClose:m,onSubmit:g,feedbackOptions:O,returnFocusRef:I}=e,p=void 0===O?f:O,[T,C]=(0,a.useState)(!1);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],o[0]=t):t=o[0];let[R,A]=(0,a.useState)(t),[N,L]=(0,a.useState)("");o[1]!==c||o[2]!==R||o[3]!==g||o[4]!==N?(r=e=>{e.preventDefault(),C(!0),R.length&&g({commentId:c,type:"NEGATIVE",feedbackChoice:R,textResponse:N})},o[1]=c,o[2]=R,o[3]=g,o[4]=N,o[5]=r):r=o[5];let x=r;return o[6]!==T||o[7]!==R||o[8]!==p||o[9]!==x||o[10]!==N?(n=()=>(0,i.jsxs)("form",{onSubmit:x,children:[(0,i.jsxs)(d.l.Body,{children:[(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)(u.A,{onChange:A,required:!0,children:[(0,i.jsx)(u.A.Label,{children:"Category"}),p.map(S),T&&!R&&(0,i.jsx)(u.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,i.jsxs)(h.A,{id:"text_response",children:[(0,i.jsx)(h.A.Label,{children:"How should we improve this response?"}),(0,i.jsx)(_.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:N,resize:"vertical",onChange:e=>L(e.currentTarget.value)})]})]}),(0,i.jsx)(d.l.Footer,{children:(0,i.jsx)(E.Q,{type:"submit",disabled:T&&(!N||!R),children:"Submit"})})]}),o[6]=T,o[7]=R,o[8]=p,o[9]=x,o[10]=N,o[11]=n):n=o[11],o[12]!==m||o[13]!==I||o[14]!==n?(l=(0,i.jsx)(d.l,{onClose:m,title:"Provide additional feedback",subtitle:"Please help us improve GitHub Copilot by sharing more details about this comment.",returnFocusRef:I,renderBody:n}),o[12]=m,o[13]=I,o[14]=n,o[15]=l):l=o[15],l};try{g.displayName||(g.displayName="NegativeFeedbackForm")}catch{}function S(e){return(0,i.jsxs)(h.A,{id:`feedback_choice_${e.value}`,children:[(0,i.jsx)(m.A,{value:e.value}),(0,i.jsx)(h.A.Label,{children:e.label})]},e.value)}let O=e=>{let t,r,n=(0,s.c)(6),{onClick:l,commentId:a,disabled:d}=e;return n[0]!==a||n[1]!==l?(t=()=>l({type:"POSITIVE",commentId:a}),n[0]=a,n[1]=l,n[2]=t):t=n[2],n[3]!==d||n[4]!==t?(r=(0,i.jsx)(c.K,{size:"small",variant:"invisible",disabled:d,icon:o.ThumbsupIcon,title:"Positive Feedback","aria-label":"Positive Feedback",onClick:t}),n[3]=d,n[4]=t,n[5]=r):r=n[5],r},I=e=>{let t,r,n,l,d,u=(0,s.c)(13),{onClick:h,commentId:_,disabled:E,feedbackOptions:m}=e,[f,S]=(0,a.useState)(!1),O=(0,a.useRef)(null);u[0]!==h?(t=e=>{h(e),S(!1)},u[0]=h,u[1]=t):t=u[1];let I=t;return u[2]!==_||u[3]!==f||u[4]!==m||u[5]!==I?(r=f&&(0,i.jsx)(g,{onClose:()=>S(!1),onSubmit:I,commentId:_,feedbackOptions:m,returnFocusRef:O}),u[2]=_,u[3]=f,u[4]=m,u[5]=I,u[6]=r):r=u[6],u[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>S(!0),u[7]=n):n=u[7],u[8]!==E?(l=(0,i.jsx)(c.K,{ref:O,size:"small",variant:"invisible",disabled:E,icon:o.ThumbsdownIcon,title:"Negative Feedback","aria-label":"Negative Feedback",onClick:n}),u[8]=E,u[9]=l):l=u[9],u[10]!==r||u[11]!==l?(d=(0,i.jsxs)(i.Fragment,{children:[r,l]}),u[10]=r,u[11]=l,u[12]=d):d=u[12],d};try{O.displayName||(O.displayName="PositiveFeedbackButton")}catch{}try{I.displayName||(I.displayName="NegativeFeedbackButton")}catch{}var p=r(96379);let T=e=>{let t,r,n,o,c,d,u=(0,s.c)(18),{commentId:h,commentUrl:_,feedbackPath:E,feedbackOptions:m,additionalParameters:f}=e,[g,S]=(0,a.useState)();e:{if(E){t=E;break e}if(_){let e=new URL(_,l.fV.origin);e.hash="",t=`${e}/code_review_feedback`;break e}throw Error("missing feedbackPath and commentUrl")}let T=t;u[0]!==f||u[1]!==T?(r={path:T,additionalParameters:f},u[0]=f,u[1]=T,u[2]=r):r=u[2];let C=(({path:e,additionalParameters:t})=>(0,a.useCallback)(({type:r,commentId:i,feedbackChoice:s,textResponse:n})=>{try{let l=new FormData;if(l.set("comment_id",i),l.set("feedback",r),t)for(let[e,r]of Object.entries(t))l.set(e,r);for(let e of s??[])l.append("feedback_choice[]",e);n&&l.set("text_response",n),(0,p.DI)(e,{method:"POST",body:l})}catch{}},[e,t]))(r);u[3]!==C?(n=e=>{S(e.type),C(e)},u[3]=C,u[4]=n):n=u[4];let R=n,A=`copilot-code-review-feedback-${h}`;return u[5]!==h||u[6]!==R||u[7]!==g?(o="NEGATIVE"!==g&&(0,i.jsx)(O,{disabled:!!g,commentId:h,onClick:R}),u[5]=h,u[6]=R,u[7]=g,u[8]=o):o=u[8],u[9]!==h||u[10]!==m||u[11]!==R||u[12]!==g?(c="POSITIVE"!==g&&(0,i.jsx)(I,{disabled:!!g,onClick:R,commentId:h,feedbackOptions:m}),u[9]=h,u[10]=m,u[11]=R,u[12]=g,u[13]=c):c=u[13],u[14]!==A||u[15]!==o||u[16]!==c?(d=(0,i.jsxs)("div",{"data-testid":A,className:"d-flex gap-1",children:[o,c]}),u[14]=A,u[15]=o,u[16]=c,u[17]=d):d=u[17],d},C=e=>{let t,r=(0,s.c)(2);return r[0]!==e?(t=(0,i.jsx)(n.t,{fallback:null,children:(0,i.jsx)(T,{...e})}),r[0]=e,r[1]=t):t=r[1],t};try{T.displayName||(T.displayName="Feedback")}catch{}try{C.displayName||(C.displayName="CopilotCodeReviewFeedback")}catch{}},56051:(e,t,r)=>{r.d(t,{kF:()=>f,F7:()=>m});var i,s=r(74848),n=r(21728),l=r(38621),a=r(24815),o=r(5945),c=r(87330),d=r(12004),u=r(52446),h=r(96540),_=r(34164);let E={filterLoadingHeight:"FileFilter-module__filterLoadingHeight--sNCxc",filterMaxHeight:"FileFilter-module__filterMaxHeight--Pjb6V"},m="No extension";function f({filterSize:e="medium",filterText:t,onFilterTextChange:r,fileExtensions:i,unselectedFileExtensions:n,onFilterChange:d,additionalFilterGroups:f}){i=i??{},n=n??new Set;let[g,S]=(0,h.useState)(t),O=(e,t)=>{d?.(e?"selectFileExtension":"unselectFileExtension",{extension:t})},I=Object.keys(i).filter(e=>e!==m).sort(),p=e=>!n.has(e),T=!!i[m];return(0,s.jsxs)("div",{id:"diff-file-tree-filter",className:"d-flex flex-nowrap gap-2",children:[(0,s.jsx)(a.A,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:l.SearchIcon,placeholder:"Filter files\u2026",size:e,className:(0,_.$)("small"===e&&E.filterMaxHeight),value:g,onChange:e=>{S(e.target.value),r?.(e.target.value)}}),(0,s.jsxs)(o.W,{children:[(0,s.jsx)(o.W.Anchor,{children:(0,s.jsx)(c.K,{"aria-label":"Filter options",icon:l.FilterIcon,className:"flex-shrink-0",size:e})}),(0,s.jsx)(o.W.Overlay,{children:(0,s.jsxs)(u.l,{children:[(0,s.jsxs)(u.l.Group,{selectionVariant:"multiple",children:[(0,s.jsx)(u.l.GroupHeading,{children:"File extensions"}),I.map(e=>{let t=p(e);return(0,s.jsx)(u.l.Item,{selected:t,onSelect:()=>O(!t,e),children:`${e} (${i[e]})`},e)}),T&&(0,s.jsx)(u.l.Item,{selected:p(m),onSelect:()=>O(!p(m),m),children:`${m} (${i[m]})`},m)]}),f]})})]})]})}try{(i=function(e){let t,r,i,u,h,m=(0,n.c)(9),{filterText:f,onFilterTextChange:g}=e;return m[0]!==g?(t=e=>g?.(e.target.value),m[0]=g,m[1]=t):t=m[1],m[2]!==f||m[3]!==t?(r=(0,s.jsx)(a.A,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:l.SearchIcon,placeholder:"Filter files\u2026",value:f,onChange:t}),m[2]=f,m[3]=t,m[4]=r):r=m[4],m[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)(o.W.Anchor,{children:(0,s.jsx)(c.K,{"aria-label":"Filter options",icon:l.FilterIcon,className:"flex-shrink-0"})}),m[5]=i):i=m[5],m[6]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.jsxs)(o.W,{children:[i,(0,s.jsx)(o.W.Overlay,{className:(0,_.$)(E.filterLoadingHeight),children:(0,s.jsx)("div",{className:(0,_.$)("d-flex","flex-column","flex-justify-center","flex-items-center",E.filterLoadingHeight),children:(0,s.jsx)(d.A,{size:"medium"})})})]}),m[6]=u):u=m[6],m[7]!==r?(h=(0,s.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[r,u]}),m[7]=r,m[8]=h):h=m[8],h}).displayName||(i.displayName="FileFilterLoading")}catch{}try{f.displayName||(f.displayName="FileFilterShared")}catch{}},78049:(e,t,r)=>{r.d(t,{E:()=>l});var i=r(74848),s=r(21728),n=r(38621);function l(e){let t=(0,s.c)(4),{status:r}=e;switch(r){case"ADDED":case"COPIED":{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(n.FileAddedIcon,{size:16,className:"fgColor-success"}),t[0]=e):e=t[0],e}case"DELETED":case"REMOVED":{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(n.FileRemovedIcon,{size:16,className:"fgColor-danger"}),t[1]=e):e=t[1],e}case"RENAMED":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(n.FileMovedIcon,{size:16,className:"fgColor-attention"}),t[2]=e):e=t[2],e}default:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(n.FileDiffIcon,{size:16,className:"fgColor-muted"}),t[3]=e):e=t[3],e}}}try{l.displayName||(l.displayName="FileStatusIcon")}catch{}},33671:(e,t,r)=>{r.r(t),r.d(t,{default:()=>_});var i=r(74848),s=r(54571),n=r(69410),l=r(12004),a=r(34164),o=r(96540);let c={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function d(e){e&&(e.load=e.hello=null,e.helloTimer&&(clearTimeout(e.helloTimer),e.helloTimer=null),e.loadTimer&&(clearTimeout(e.loadTimer),e.loadTimer=null))}function u(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}let h={FileRendererWrapper:"FileRendererBlob-module__FileRendererWrapper--SxJRI",FileRendererViewport:"FileRendererBlob-module__FileRendererViewport--VgIf1",FileRendererViewportNonError:"FileRendererBlob-module__FileRendererViewportNonError--cZ29b",FileRendererViewportReady:"FileRendererBlob-module__FileRendererViewportReady--seGRC",loadingIndicator:"FileRendererBlob-module__loadingIndicator--SraxA",fileContentFrame:"FileRendererBlob-module__fileContentFrame--r1d91",fileContentFrameNotReady:"FileRendererBlob-module__fileContentFrameNotReady--mMJW4",errorMessageHeading:"FileRendererBlob-module__errorMessageHeading--qTuWN"};function _({identityUuid:e,size:t,type:r,url:_,iframeClassName:m,viewportClassName:f}){let[g]=(0,s.I)(()=>window.location.origin,"https://www.github.com",[]),S=new URL(_,g).origin,{renderState:O,errorMsg:I,iFrameRef:p,containerRef:T}=function(e,t){let[r,i]=function(e){let[t,r]=(0,o.useState)(e),i=(0,o.useRef)(t);return[i,e=>{i.current=e,r(e)}]}(c.LOADING),s=(0,o.useRef)(null),n=(0,o.useRef)(null),l=(0,o.useRef)(null),a=(0,o.useRef)({untimed:!0}),h=(0,o.useCallback)(r=>(function(e,t,r,i,s,n,l,a){if(e.origin!==t)return;let o=function(e){var t;let r=e.data;if(!r)return null;if("string"==typeof r)try{r=JSON.parse(r)}catch{return null}return"object"==typeof(t=r)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?r:null}(e);if(!o)return void l(c.ERROR);if(o.identity!==r)return;let d=o.body,h=null!=o.payload?o.payload:void 0,_=i.current?.contentWindow;switch(d){case"hello":(n.current??{untimed:!0}).hello=Date.now(),u(_,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),u(_,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":h&&a(h.error??null),l(c.ERROR);break;case"loading":l(c.LOADING);break;case"loaded":l(c.LOADED);break;case"ready":h&&"number"==typeof h.height&&s.current&&(s.current.style.height=`${h.height}px`),l(c.READY);break;case"resize":h&&"number"==typeof h.height&&s.current&&(s.current.style.height=`${h.height}px`);break;case"code_rendering_service:container:get_size":u(_,{type:"render:cmd",body:{cmd:"code_rendering_service:container:size","code_rendering_service:container:size":{width:s.current?.getBoundingClientRect().width}}});break;case"code_rendering_service:markdown:get_data":if(!i.current||!s.current)return;!function(e,t){let r=e.getAttribute("data-content");if(!r)return;let i={type:"render:cmd",body:{cmd:"code_rendering_service:data:ready","code_rendering_service:data:ready":{data:JSON.parse(r).data,width:t.getBoundingClientRect().width}}};u(e.contentWindow,i)}(i.current,s.current)}})(r,e,t,n,l,a,i,e=>s.current=e),[e,i,t]);return(0,o.useEffect)(()=>{d(a.current);let e=e=>{(r.current===c.LOADING||r.current===c.LOADED)&&(!e||a.current.hello)&&i(c.ERROR)};return a.current={load:Date.now(),hello:null,helloTimer:window.setTimeout(e,1e4,!0),loadTimer:window.setTimeout(e,45e3)},()=>{d(a.current)}},[r,i]),(0,o.useEffect)(()=>(window.addEventListener("message",h),()=>window.removeEventListener("message",h)),[h]),{renderState:r.current,errorMsg:s.current,iFrameRef:n,containerRef:l}}(S,e);return"ipynb"===r&&t>3e7||t>2e8?(0,i.jsx)(n.A,{variant:"danger",children:"Sorry, this is too big to display."}):(0,i.jsx)("div",{className:h.FileRendererWrapper,children:(0,i.jsxs)("div",{"data-hpc":!0,"data-host":S,"data-type":r,ref:T,className:(0,a.$)(h.FileRendererViewport,{[h.FileRendererViewportNonError]:O!==c.ERROR,[h.FileRendererViewportReady]:O===c.READY},f),children:[O===c.ERROR?(0,i.jsx)(E,{error:I}):O!==c.READY?(0,i.jsx)(l.A,{size:"large",className:h.loadingIndicator}):null,O!==c.ERROR&&(0,i.jsx)("iframe",{ref:p,src:`${_}#${e}`,sandbox:"allow-scripts allow-same-origin allow-top-navigation",name:e,title:"File display",className:(0,a.$)(h.fileContentFrame,{[h.fileContentFrameNotReady]:O!==c.READY},m),children:"Viewer requires iframe."})]})})}function E({error:e}){if(!e)return(0,i.jsx)(n.A,{variant:"danger",children:"Unable to render code block"});let t=e.split(`
`);return(0,i.jsxs)(n.A,{variant:"danger",children:[(0,i.jsx)("p",{className:h.errorMessageHeading,children:"Error rendering embedded code"}),(0,i.jsx)("p",{children:t.map((e,t)=>(0,i.jsxs)(o.Fragment,{children:[e,(0,i.jsx)("br",{})]},`error-line-${t}`))})]})}try{_.displayName||(_.displayName="FileRendererBlob")}catch{}try{E.displayName||(E.displayName="FileRendererErrorMessage")}catch{}},87825:(e,t,r)=>{r.d(t,{o:()=>a});var i=r(74848),s=r(21728),n=r(38621),l=r(94977);function a(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(l.A,{direction:"n",text:"This line has hidden Unicode characters",children:(0,i.jsx)(n.AlertIcon,{className:"mr-2"})}),t[0]=e):e=t[0],e}try{a.displayName||(a.displayName="HiddenUnicodeAlert")}catch{}},60745:(e,t,r)=>{r.d(t,{a:()=>u});var i=r(74848),s=r(21728),n=r(71315),l=r(54571),a=r(38621),o=r(81246),c=r(69410),d=r(55847);function u(e){let t,r,u,_,E,m=(0,s.c)(7),{isShown:f,toggleShowHiddenCharacters:g}=e;m[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],m[0]=t):t=m[0];let[S]=(0,l.I)(h,n.cg,t);if(!S)return null;m[1]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(a.AlertIcon,{}),m[1]=r):r=m[1],m[2]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsxs)("span",{children:["This file contains bidirectional or hidden Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters."," ",(0,i.jsx)(o.A,{inline:!0,href:"https://github.co/hiddenchars",target:"_blank",rel:"noreferrer",children:"Learn more about bidirectional Unicode characters"})]}),m[2]=u):u=m[2],m[3]===Symbol.for("react.memo_cache_sentinel")?(_={backgroundClip:"padding-box"},m[3]=_):_=m[3];let O=f?"Hide revealed characters":"Show hidden characters";return m[4]!==O||m[5]!==g?(E=(0,i.jsxs)(c.A,{className:"d-flex flex-items-center",full:!0,variant:"warning",children:[r,u,(0,i.jsx)(d.Q,{className:"ml-4 float-right",onClick:g,size:"small",style:_,children:O})]}),m[4]=O,m[5]=g,m[6]=E):E=m[6],E}function h(){return n.cg}try{u.displayName||(u.displayName="HiddenUnicodeBanner")}catch{}},12918:(e,t,r)=>{r.d(t,{Gx:()=>a});var i,s=r(74848),n=r(21728),l=r(21537);function a(e){return(0,l.Y)(e)?(0,l.t6)(e).map(e=>{let t=l.A0.get(e);return t?`<span class="hidden-unicode-replacement">${t}</span>`:e}).join(""):null}try{(i=function(e){let t,r=(0,n.c)(2),{char:i}=e;return r[0]!==i?(t=(0,s.jsx)("span",{className:"hidden-unicode-replacement padded",children:i}),r[0]=i,r[1]=t):t=r[1],t}).displayName||(i.displayName="HiddenUnicodeCharacter")}catch{}},8934:(e,t,r)=>{r.d(t,{x:()=>o});var i=r(74848),s=r(21728),n=r(13523),l=r(96540),a=r(54571);let o=(0,l.forwardRef)(function(e,t){let r,l,o,d,u,h,_=(0,s.c)(13);_[0]!==e?({children:r,src:o,...l}=e,_[0]=e,_[1]=r,_[2]=l,_[3]=o):(r=_[1],l=_[2],o=_[3]),_[4]===Symbol.for("react.memo_cache_sentinel")?(d=[],_[4]=d):d=_[4];let[E]=(0,a.I)(c,!0,d);return _[5]!==E||_[6]!==o?(u=E?{}:{src:o,"data-nonce":(0,n.M1)()},_[5]=E,_[6]=o,_[7]=u):u=_[7],_[8]!==r||_[9]!==l||_[10]!==t||_[11]!==u?(h=(0,i.jsx)("include-fragment",{...l,ref:t,...u,children:r}),_[8]=r,_[9]=l,_[10]=t,_[11]=u,_[12]=h):h=_[12],h});try{o.displayName||(o.displayName="IncludeFragment")}catch{}function c(){return!1}},17998:(e,t,r)=>{r.d(t,{k:()=>o});var i=r(74848),s=r(77430),n=r(75177),l=r(30729);function a({iconColor:e,icon:t,size:r=12,backgroundColor:s="fg.onEmphasis",absolute:a=!0,backgroundSx:o,backgroundClassName:c}){let d,u;return 12===r?(d="10px",u="1px"):20===r?(d="16px",u="2px"):(d="16px",u="4px"),(0,i.jsxs)(n.A,{sx:{display:"flex",borderRadius:"100px",...a?{position:"absolute",bottom:-1,right:-1,boxShadow:"0 0 0 2px var(--bgColor-default, var(--color-canvas-default))",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))"}:{position:"relative"},...o},className:c,children:[(0,i.jsx)(n.A,{sx:{display:"flex",position:"absolute",borderRadius:"100px",width:d,height:d,left:u,top:u,backgroundColor:s}}),(0,i.jsx)(l.A,{icon:t,size:r,sx:{color:e,position:"relative"}})]})}try{a.displayName||(a.displayName="StatusIcon")}catch{}function o({zIndex:e,altText:t,hovercardUrl:r,src:l,square:o,icon:c,iconColor:d,backgroundColor:u,backgroundSx:h,backgroundClassName:_,className:E,sx:m,size:f=20}){return(0,i.jsxs)(n.A,{sx:{position:"relative",display:"flex",gap:2,alignItems:"center",...e,...m},className:E,children:[(0,i.jsx)(s.r,{alt:t,"data-hovercard-url":r,size:f,square:o,src:l}),(0,i.jsx)(a,{icon:c,iconColor:d,size:12,backgroundColor:u,backgroundClassName:_,backgroundSx:h})]})}try{o.displayName||(o.displayName="StatusAvatar")}catch{}}}]);
//# sourceMappingURL=packages_copilot-auth-token_copilot-auth-token_ts-packages_diff-file-header_diff-file-header_-ebf719-4173634757b3.js.map